# This file was generated by Rcpp::compileAttributes
# Generator token: 10BE3573-1514-4C36-9D1C-5A225CD40393

#' @title
#' session_count
#' @description
#' Session counting function
#' 
#' @param x a vector of intertime values
#' 
#' @param local_minimum the threshold (in seconds) to split out a new session on. Set to 3600
#' by default.
#' 
#' @details
#' \code{session_count} takes a vector of intertime values (generated via \code{\link{intertimes}},
#' or in any other way you see fit) and returns the total number of sessions within that dataset.
#' It's implimented in C++, providing a (small) increase in speed over the R equivalent.
#' 
#' @seealso
#' \code{\link{intertimes}}, for generating inter-time values,or \code{\link{session_length}} for
#' session length, in seconds.
#' 
#' @export
session_count <- function(x, local_minimum = 3600L) {
    .Call('WMUtils_session_count', PACKAGE = 'WMUtils', x, local_minimum)
}

#'@title
#'session_length
#'
#'@description
#'Session counting function
#' 
#'@param intertimes a vector of inter-time values.
#' 
#'@param local_minimum the threshold (in seconds) to split out a new session on. Set to 3600
#' by default.
#'
#'@param average_intertime the average time between events within a session, used to handle missing values
#'(time associated with the first request in a series of intertime pairs, for example). Set to 430 seconds
#'by default.
#'
#'@details
#'\code{session_length} takes a vector of intertime values (generated via \code{\link{intertimes}},
#'or in any other way you see fit), splits them into sessions, and calculates the approximate
#'length (in seconds) of each session. It's implemented in C++ since, even with the hinkiness
#'of my C++, it's still several OoM faster than the equivalent R (recursion in R is dumb).
#'
#'@return a vector of session length counts, in seconds.
#' 
#'@seealso
#'\code{\link{intertimes}}, for generating inter-time values, and \code{\link{session_count}} for
#'simply counting the number of sessions.
#' 
#'@export
session_length <- function(intertimes, local_minimum = 3600L, average_intertime = 430L) {
    .Call('WMUtils_session_length', PACKAGE = 'WMUtils', intertimes, local_minimum, average_intertime)
}

#'@title session_pages
#'@description count the number of pages in a session (or multiple sessions)
#'
#'@details \code{session_pages} counts the number of pages in a session, or in multiple
#'sessions, based on a provided numeric vector of intertime values, which can be
#'generated via \code{\link{intertimes}}.
#'
#'@param intertimes a vector of intertime values.
#'
#'@param local_minimum the threshold at which to split a series of intertime values into
#'multiple sessions. Set to 3600 seconds (1 hour) by default.
#'
#'@seealso \code{\link{intertimes}} for generating intertime values, \code{\link{session_length}}
#'for session length, and \code{\link{session_count}} for the number of distinct sessions represented
#'by a series of intertime values.
#'
#'@export
session_pages <- function(intertimes, local_minimum = 3600L) {
    .Call('WMUtils_session_pages', PACKAGE = 'WMUtils', intertimes, local_minimum)
}

cpp_intertimes <- function(timestamps) {
    .Call('WMUtils_cpp_intertimes', PACKAGE = 'WMUtils', timestamps)
}

